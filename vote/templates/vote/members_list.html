{% extends 'admin/base_site.html' %}
{% block title %}Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡{% endblock %}

{% block content %}

<div style="margin-bottom: 20px; text-align: right;">
    <a href="{% url 'members_print' %}" target="_blank" class="button" style="background-color: #d32f2f; color: white; padding: 10px 15px; border-radius: 5px; text-decoration: none;">
        ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡
    </a>
</div>

<div style="direction: rtl;">
    <h1>ğŸ‘¥ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡</h1>

    <div style="margin-bottom: 15px;">
        <input type="text" id="memberSearch" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¹Ø¶Ùˆ..." style="padding: 8px; width: 300px; border-radius: 5px; border: 1px solid #ccc;">
        <a href="{% url 'export_members_excel' %}" class="button" style="margin-right: 20px;">â¬‡ï¸ ØªØ­Ù…ÙŠÙ„ Excel</a>
    </div>

    <table id="membersTable" border="1" cellpadding="5" cellspacing="0" style="width: 100%; border-collapse: collapse;">
        <thead style="background: #333; color: white;">
            <tr>
                <th>Ø±Ù‚Ù… Ø§Ù„Ø¹Ø¶ÙˆÙŠØ©</th>
                <th>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</th>
                <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
                <th>Ø§Ù„Ø¨Ø±ÙŠØ¯</th>
                <th>Ø§Ù„Ø¬Ù†Ø³</th>
                <th>Ø§Ù„Ø¹Ù…Ø±</th>
                <th>Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©</th>
                <th>Ø¹Ø¯Ø¯ Ø£ÙØ±Ø§Ø¯ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©</th>
                <th>Ø£Ø­Ù‚ÙŠØ© Ø§Ù„ØªØµÙˆÙŠØª</th>
            </tr>
        </thead>
        <tbody>
            {% for member in members %}
            <tr>
                <td>{{ member.member_id }}</td>
                <td>{{ member.full_name }}</td>
                <td>{{ member.phone }}</td>
                <td>{{ member.email }}</td>
                <td>{{ member.gender }}</td>
                <td>{{ member.age }}</td>
                <td>{{ member.marital_status }}</td>
                <td>{{ member.family_members }}</td>
                <td>{{ member.can_vote }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<script>
    document.getElementById('memberSearch').addEventListener('keyup', function () {
        const query = this.value.toLowerCase();
        const rows = document.querySelectorAll('#membersTable tbody tr');
        rows.forEach(row => {
            const text = row.innerText.toLowerCase();
            row.style.display = text.includes(query) ? '' : 'none';
        });
    });
</script>

{% endblock %}
