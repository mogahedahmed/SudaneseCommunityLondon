<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>ØªØ³Ø¬ÙŠÙ„ Ø¹Ø¶ÙˆÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</title>
    <style>
        body {
            direction: rtl;
            font-family: Tahoma;
            background-color: #f4f4f4;
            padding: 20px;
        }
        .form-section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        input, select {
            width: 100%;
            padding: 8px;
            margin: 5px 0 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .add-child-btn {
            background: #4caf50;
            color: white;
            padding: 8px 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 10px;
        }
        .submit-btn {
            background: #d32f2f;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            width: 100%;
        }
        .note {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeeba;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            font-size: 14px;
        }
    </style>
</head>
<body>

<h2>ğŸ“ ØªØ³Ø¬ÙŠÙ„ Ø¹Ø¶ÙˆÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</h2>

{% if messages %}
    {% for message in messages %}
        <p style="color: red;">{{ message }}</p>
    {% endfor %}
{% endif %}

<form method="post">
    {% csrf_token %}

    <div class="form-section">
        <h3>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø¶Ùˆ</h3>
        <input name="member_id" value="{{ next_member_id }}" readonly required style="background-color: #eee;">
        <input name="full_name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" required>
        <select name="gender" required>
            <option value="">Ø§Ù„Ø¬Ù†Ø³</option>
            <option value="Ø°ÙƒØ±">Ø°ÙƒØ±</option>
            <option value="Ø£Ù†Ø«Ù‰">Ø£Ù†Ø«Ù‰</option>
        </select>
        <input name="address" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†">
        <input name="age" type="number" placeholder="Ø§Ù„Ø¹Ù…Ø±" required>
        <input name="email" type="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
        <input name="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" required>
        <input name="password" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
        <select name="marital_status" required>
            <option value="">Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©</option>
            <option value="Ø£Ø¹Ø²Ø¨">Ø£Ø¹Ø²Ø¨</option>
            <option value="Ù…ØªØ²ÙˆØ¬">Ù…ØªØ²ÙˆØ¬</option>
            <option value="Ø·Ø§Ù„Ø¨">Ø·Ø§Ù„Ø¨</option>
        </select>
        <input name="family_members" type="number" placeholder="Ø¹Ø¯Ø¯ Ø£ÙØ±Ø§Ø¯ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©">
        <select name="can_vote" required>
            <option value="">Ø£Ø­Ù‚ÙŠØ© Ø§Ù„ØªØµÙˆÙŠØª</option>
            <option value="Ù†Ø¹Ù…">Ù†Ø¹Ù…</option>
            <option value="Ù„Ø§">Ù„Ø§</option>
        </select>
    </div>

    <div class="form-section">
        <h3>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</h3>

        <select name="payment_method" id="payment_method" onchange="togglePaymentFields()" required>
            <option value="">Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</option>
            <option value="VOID CHEQUE">VOID CHEQUE</option>
            <option value="E-TRANSFER">E-TRANSFER</option>
            <option value="CASH">CASH</option>
        </select>

        <select name="payment_period" required>
            <option value="">ÙØªØ±Ø© Ø§Ù„Ø³Ø¯Ø§Ø¯</option>
            <option value="Ø´Ù‡Ø±ÙŠ">Ø´Ù‡Ø±ÙŠ</option>
            <option value="Ø³Ù†ÙˆÙŠ">Ø³Ù†ÙˆÙŠ</option>
        </select>

        <!-- VOID CHEQUE -->
        <div id="void_fields" style="display:none;">
            <input name="institution_number" placeholder="Institution Number">
            <input name="transit_number" placeholder="Transit Number">
            <input name="account_number" placeholder="Account Number">
        </div>

        <!-- E-TRANSFER -->
        <div id="etransfer_fields" style="display:none;">
            <input name="bank_name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ùƒ">
            <input name="account_name" placeholder="Ø§Ù„Ø§Ø³Ù… ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨">
            <input name="account_number" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨">
        </div>
    </div>

    <div class="form-section">
        <h3>Ø£ÙØ±Ø§Ø¯ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©</h3>
        <div class="note">
            âš ï¸ ÙŠÙØ±Ø¬Ù‰ Ø¹Ø¯Ù… ØªÙƒØ±Ø§Ø± Ø£ÙØ±Ø§Ø¯ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© ÙÙŠ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø¨ ÙˆØ§Ù„Ø£Ù… Ù…Ø¹Ù‹Ø§. Ø¥Ø°Ø§ ØªÙ… Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø£Ø¨Ù†Ø§Ø¡ ÙÙŠ Ø­Ø³Ø§Ø¨ Ø£Ø­Ø¯ Ø§Ù„Ø²ÙˆØ¬ÙŠÙ†ØŒ ÙÙ„Ø§ Ø¯Ø§Ø¹ÙŠ Ù„Ø¥Ø¯Ø®Ø§Ù„Ù‡Ù… Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ÙÙŠ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¢Ø®Ø±.
        </div>
        <div id="children-container"></div>
        <button type="button" class="add-child-btn" onclick="addChild()">â• Ø¥Ø¶Ø§ÙØ© ÙØ±Ø¯</button>
    </div>

    <button type="submit" class="submit-btn">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
</form>

<script>
function togglePaymentFields() {
    const method = document.getElementById("payment_method").value;
    document.getElementById("void_fields").style.display = (method === "VOID CHEQUE") ? "block" : "none";
    document.getElementById("etransfer_fields").style.display = (method === "E-TRANSFER") ? "block" : "none";
}

function addChild() {
    const container = document.getElementById('children-container');
    const div = document.createElement('div');
    div.innerHTML = `
        <input name="child_name[]" placeholder="Ø§Ø³Ù… ÙØ±Ø¯ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©" required>
        <select name="child_gender[]" required>
            <option value="">Ø§Ù„Ø¬Ù†Ø³</option>
            <option value="Ø°ÙƒØ±">Ø°ÙƒØ±</option>
            <option value="Ø£Ù†Ø«Ù‰">Ø£Ù†Ø«Ù‰</option>
        </select>
        <input name="child_age[]" type="number" placeholder="Ø§Ù„Ø¹Ù…Ø±" required>
        <input name="child_relation[]" placeholder="ØµÙ„Ø© Ø§Ù„Ù‚Ø±Ø§Ø¨Ø©" required>
        <hr>
    `;
    container.appendChild(div);
}
</script>

</body>
</html>
